/* config/prospector_scanner.overlay (ãƒ‡ãƒãƒƒã‚°ç”¨) */

/ {
    chosen {
        zephyr,display = &st7789v;
        // zmk,kscan = &kscan0; // ğŸ‘ˆ ãƒ‡ãƒãƒƒã‚°ã®ãŸã‚ã«ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–
    };
};

// =================================================================
// ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã®å®šç¾© (ST7789V - SPI)
// =================================================================

// Xiao BLE ã® spi0 ãƒãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–
&spi0 {
    compatible = "nordic,nrf-spi";
    status = "okay";
    
    // LCD_CLK (D8) -> SCK (Pin 29)
    sck-pin = <29>;
    // LCD_DIN (D10) -> MOSI (Pin 30)
    mosi-pin = <30>;
    // MISO ã¯ä½¿ã‚ãªã„ãŒå®šç¾©ã¯å¿…è¦
    miso-pin = <0>;

    st7789v: st7789v@0 {
        compatible = "sitronix,st7789v";
        label = "ST7789V";
        reg = <0>; 

        spi-max-frequency = <10000000>;
        
        // LCD_DC (D7) -> Data/Command (Pin 11)
        cmd-data-gpios = <&gpio0 11 GPIO_ACTIVE_HIGH>;
        
        // LCD_RST (D3) -> Reset (Pin 6)
        reset-gpios = <&gpio0 6 GPIO_ACTIVE_LOW>;
        
        // LCD_CS (D9) -> Chip Select (Pin 31)
        cs-gpios = <&gpio0 31 GPIO_ACTIVE_LOW>;
        
        // LCD_BL (D6) -> Backlight (Pin 10)
        backlight = <&pwm0 0>; // PWM Backlight
        
        width = <240>;
        height = <240>;
        x-offset = <0>;
        y-offset = <0>;
        rotation = <0>;
        status = "okay";
    };
};

// =================================================================
// Backlight PWM (D6 -> P0.10) ã®æœ‰åŠ¹åŒ–
// =================================================================

&pwm0 {
    status = "okay";
    // Pin 10 ã‚’ PWM ãƒãƒ£ãƒ³ãƒãƒ«ã¨ã—ã¦ä½¿ç”¨
    ch0-pin = <10>; 
};
