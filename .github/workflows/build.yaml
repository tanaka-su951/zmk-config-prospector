    - name: Manually Setup Zephyr SDK (Final Version Update)
      run: |
        echo "--- 3. Zephyr SDKを手動でダウンロードして環境変数を設定 ---"
        # 🚨 修正: SDK バージョンを 0.16.5 に更新 🚨
        SDK_VERSION="0.16.5"
        SDK_FILENAME="zephyr-sdk-${SDK_VERSION}_linux-x86_64.tar.gz"
        SDK_URL="https://github.com/zephyrproject-rtos/sdk-ng/releases/download/v${SDK_VERSION}/${SDK_FILENAME}"
        WEST_TOOLCHAIN_DIR="$HOME/zephyr-sdk"
        
        # wget のサイレントモード (-q) を削除し、エラー時にログ出力させる
        wget "${SDK_URL}"
        
        mkdir -p $WEST_TOOLCHAIN_DIR
        # SDKファイルが存在しない場合、ここで tar がエラーを出す
        tar -xzf "${SDK_FILENAME}" --strip-components=1 -C $WEST_TOOLCHAIN_DIR
        
        rm "${SDK_FILENAME}"
        
        echo "ZEPHYR_TOOLCHAIN_VARIANT=zephyr" >> $GITHUB_ENV
        echo "ZEPHYR_SDK_INSTALL_DIR=$WEST_TOOLCHAIN_DIR" >> $GITHUB_ENV
        export KCONFIG_NONINTERACTIVE=1
