Run echo "--- DEBUG: Force Git Submodule Init ---"
  echo "--- DEBUG: Force Git Submodule Init ---"
  # 破損したZMKフォルダをクリーンアップし、再取得を強制する
  if [ -d "zmk" ]; then rm -rf zmk; fi
  
  # サブモジュールを初期化し、クローンする
  git submodule update --init --recursive --force
  
  if [ ! -d "zmk/app" ]; then
    echo "FATAL: ZMK/APP is still missing after forced Git update."
    # ビルドの続行を不可能にするためエラーコード1を返す
    exit 1 
  fi
  echo "ZMK submodule check successful."
  shell: /usr/bin/bash -e {0}
--- DEBUG: Force Git Submodule Init ---
FATAL: ZMK/APP is still missing after forced Git update.
Error: Process completed with exit code 1.
